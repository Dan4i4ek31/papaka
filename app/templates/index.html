<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>–¶–∏—Ñ—Ä–∞–ú–∞—Ä–∫–µ—Ç</title>

  <!-- Favicons -->
  <link rel="icon" href="assets/key-icon.png" type="image/png">
  <link rel="apple-touch-icon" href="assets/key-icon.png">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@300;400;700&display=swap" rel="stylesheet">

  <!-- Simple icon set -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.css">

  <!-- Styles -->
  <link rel="stylesheet" href="/app/static/css/styles.css">
  <link rel="stylesheet" href="/app/static/css/mobile-enhanced.css">

  <!-- Import map (no external JS frameworks required, but kept for extensibility) -->
  <script type="importmap">
  {
    "imports": {}
  }
  </script>
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <div class="brand">
        <img src="nano-banana_20251205_181151_16c0fe00.png" alt="logo" class="logo" onerror="this.style.display='none'">
        <div>
          <h1>–¶–∏—Ñ—Ä–∞–ú–∞—Ä–∫–µ—Ç</h1>
          <p class="tag">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏ –∏ –≥–∏–¥—ã –ø–æ –∏–≥—Ä–∞–º</p>
        </div>
      </div>

      <nav class="nav">
        <input id="search" class="search" placeholder="–ü–æ–∏—Å–∫ –∏–≥—Ä, –Ω–∞–ø—Ä–∏–º–µ—Ä Dota 2" />
        <div id="authArea" style="display:flex;gap:8px;align-items:center">
          <div id="userProfile" style="display:none;">
            <button id="profileBtn" class="profile-btn" onclick="location.href='/account.html'">
            <div class="profile-avatar" id="userAvatar"></div>
            <span id="userName"></span>
            </button>
            <button id="logoutBtn" class="btn ghost" style="font-size:13px;padding:6px 8px;">–í—ã–π—Ç–∏</button>
          </div>
          <div id="authButtons" style="display:flex;gap:8px;align-items:center">
            <button id="authBtn" class="btn ghost" onclick="location.href='/auth.html'">–í–æ–π—Ç–∏</button>
            <button id="registerBtn" class="btn primary" onclick="location.href='/auth.html#register'">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
          </div>
        </div>
        <button class="btn ghost" title="–ò–∑–±—Ä–∞–Ω–Ω–æ–µ" onclick="location.href='/favorite.html'">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ (<span id="favCount">0</span>)</button>
        <button id="cartBtn" class="btn ghost" onclick="location.href='/cart.html'">–ö–æ—Ä–∑–∏–Ω–∞ (<span id="cartCount">0</span>)</button>
        <button id="chatBtn" class="btn ghost" onclick="location.href='/chat.html'">–ß–∞—Ç</button>
        <button id="adminBtn" class="btn ghost" title="–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—Å–∫–∞—è –ø–∞–Ω–µ–ª—å" onclick="location.href='/admin.html'" style="color:#667eea;font-weight:bold;">Admin üîê</button>
      </nav>
    </div>
  </header>

  <!-- Preview hero inserted here -->
  <section class="preview-hero">
    <div class="container preview-inner">
      <div class="preview-thumbs" aria-hidden="true">
        <img src="https://cdn.cloudflare.steamstatic.com/steam/apps/570/header.jpg" alt="Dota 2">
        <img src="https://cdn.cloudflare.steamstatic.com/steam/apps/945360/header.jpg" alt="Among Us">
        <img src="https://cdn.cloudflare.steamstatic.com/steam/apps/870780/header.jpg" alt="Control" onerror="this.src='https://via.placeholder.com/600x200?text=Control'">
        <img src="https://cdn.cloudflare.steamstatic.com/steam/apps/730/header.jpg" alt="CS:GO">
        <img src="https://cdn.cloudflare.steamstatic.com/steam/apps/883710/header.jpg" alt="Resident Evil">
      </div>
      <h2 class="preview-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –¶–∏—Ñ—Ä–∞–ú–∞—Ä–∫–µ—Ç</h2>
    </div>
  </section>

  <main class="container">
    <!-- content unchanged -->
    {{ super() if false }}
  </main>

  <!-- Cart / Checkout Modal -->
  <div id="cartModal" class="modal" aria-hidden="true">
    <div class="modal-panel">
      <header class="modal-header">
        <h3>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h3>
        <button id="closeCart" class="btn icon">√ó</button>
      </header>
      <div class="modal-body" id="cartItems">
        <!-- Items -->
      </div>

      <!-- Checkout form (hidden until user proceeds) -->
      <div id="checkoutForm" style="display:none;padding:12px;border-top:1px solid rgba(255,255,255,0.02);">
        <h4 style="margin:6px 0 8px">–î–∞–Ω–Ω—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –∏ –æ–ø–ª–∞—Ç–∞</h4>
        <div style="display:grid;gap:8px">
          <input id="checkoutName" placeholder="–§–ò–û –ø–æ–ª—É—á–∞—Ç–µ–ª—è" style="padding:10px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
          <input id="checkoutEmail" placeholder="Email –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫" style="padding:10px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
          <div id="paymentMethodInputGroup">
            <label style="display:block;font-size:13px;color:var(--muted);margin:0 0 6px">–û—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã:</label>
            <div id="mainPaymentMethods" class="payment-chips">
              <button class="payment-chip selected" data-method="card">–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞</button>
              <button class="payment-chip" data-method="paypal">PayPal</button>
              <button class="payment-chip" data-method="qiwi">Qiwi</button>
              <button class="payment-chip" data-method="cod">–û–ø–ª–∞—Ç–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏</button>
            </div>
            <div id="cardSpecificPayments" style="margin-top:10px;display:block;">
              <label style="display:block;font-size:13px;color:var(--muted);margin:0 0 6px">–í—ã–±–µ—Ä–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É:</label>
              <div id="cardPaymentMethods" class="payment-chips">
                <button class="payment-chip selected" data-method="card-visa">Visa/Mastercard</button>
                <button class="payment-chip" data-method="card-apple">Apple Pay</button>
                <button class="payment-chip" data-method="card-google">Google Pay</button>
                <button class="payment-chip" data-method="card-yoomoney">–Æ–úoney</button>
              </div>
            </div>
            <input id="paymentMethodHidden" type="hidden" value="card-visa">
          </div>
          <input id="paymentData" placeholder="–î–∞–Ω–Ω—ã–µ –æ–ø–ª–∞—Ç—ã (–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã/–ê–∫–∫–∞—É–Ω—Ç)" style="padding:10px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
          <div style="display:flex;gap:8px;justify-content:flex-end">
            <button id="cancelCheckout" class="btn ghost">–û—Ç–º–µ–Ω–∞</button>
            <button id="confirmPayment" class="btn primary">–û–ø–ª–∞—Ç–∏—Ç—å</button>
          </div>
        </div>
      </div>

      <footer class="modal-footer">
        <div class="total">–ò—Ç–æ–≥–æ: <strong id="cartTotal">0 ‚ÇΩ</strong></div>
        <div class="modal-actions">
          <button id="clearCart" class="btn ghost">–û—á–∏—Å—Ç–∏—Ç—å</button>
          <button id="checkoutBtn" class="btn primary">–û—Ñ–æ—Ä–º–∏—Ç—å</button>
        </div>
      </footer>
    </div>
  </div>

  <!-- Auth Modal -->
  <div id="authModal" class="modal" aria-hidden="true">
    <div class="modal-panel" style="max-width:420px">
      <header class="modal-header">
        <h3 id="authTitle">–í–æ–π—Ç–∏</h3>
        <button id="closeAuth" class="btn icon">√ó</button>
      </header>
      <div class="modal-body" style="padding:12px;display:grid;gap:8px">
        <input id="authName" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è / email" style="padding:10px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
        <input id="authPass" type="password" placeholder="–ü–∞—Ä–æ–ª—å" style="padding:10px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
        <div style="display:flex;gap:8px;justify-content:flex-end">
          <button id="toRegister" class="btn ghost">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
          <button id="submitAuth" class="btn primary">–í–æ–π—Ç–∏</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Chat Modal -->
  <div id="chatModal" class="modal" aria-hidden="true">
    <div class="modal-panel" style="max-width:500px;display:flex;flex-direction:column;height:70vh;padding:8px">
      <header class="modal-header">
        <h3>–ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏</h3>
        <button id="closeChat" class="btn icon">√ó</button>
      </header>
      <div id="chatBody" class="modal-body" style="padding:8px;flex:1;display:flex;flex-direction:column;gap:8px;overflow:auto;background:transparent">
      </div>
      <footer style="display:flex;gap:8px;align-items:center;padding-top:6px">
        <input id="chatInput" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." style="flex:1;padding:10px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">
        <button id="sendChat" class="btn primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
      </footer>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast" aria-live="polite" aria-atomic="true"></div>

  <!-- Mobile Bottom Navigation -->
  <nav class="mobile-nav" id="mobileNav" aria-label="Mobile navigation">
    <button class="mobile-nav-item" data-page="home" onclick="location.href='/'">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
      </svg>
      <span>–ì–ª–∞–≤–Ω–∞—è</span>
    </button>
    <button class="mobile-nav-item" data-page="search" onclick="document.getElementById('search').focus()">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.35-4.35"></path>
      </svg>
      <span>–ü–æ–∏—Å–∫</span>
    </button>
    <button class="mobile-nav-item" data-page="cart" onclick="location.href='/cart.html'">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <circle cx="9" cy="21" r="1"></circle>
        <circle cx="20" cy="21" r="1"></circle>
        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
      </svg>
      <span>–ö–æ—Ä–∑–∏–Ω–∞</span>
    </button>
    <button class="mobile-nav-item" data-page="favorites" onclick="location.href='/favorite.html'">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
      </svg>
      <span>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
    </button>
    <button class="mobile-nav-item" data-page="account" onclick="location.href='/account.html'">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
        <circle cx="12" cy="7" r="4"></circle>
      </svg>
      <span>–ê–∫–∫–∞—É–Ω—Ç</span>
    </button>
  </nav>

  <script type="module" src="/app/static/js/app.js"></script>
  <script type="module" src="/app/static/js/mobile.js"></script>
</body>
</html>

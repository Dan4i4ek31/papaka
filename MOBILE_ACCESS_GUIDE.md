# üì± –ì–∞–π–¥ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –ú–æ–±–∏–ª—å–Ω—ã—Ö –£—Å—Ç—Ä–æ–π—Å—Ç–≤

## üîí –ü–æ–¥ —á—Ç–æ –±—ã–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞ –∏ –∫–∞–∫ —Ä–µ—à–µ–Ω–∞

### –ü—Ä–æ–±–ª–µ–º–∞: **Access Denied / CORS Error**

**–ö–æ–≥–¥–∞ –≤—ã –æ—Ç–∫—Ä—ã–≤–∞–ª–∏ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞**, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Ç—Ä–∏–µ–¥ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫:

```javascript
const API_BASE_URL = 'http://localhost:8000';
```

–ù–æ **`localhost` –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ** - —ç—Ç–æ **—Ç–µ–ª–µ—Ñ–æ–Ω**, –∞ –Ω–µ —Å–µ—Ä–≤–µ—Ä! üôã‚Äç‚ôÇÔ∏è

–í—ã—Ö–æ–¥ –≤—ã–∑–≤–∞–ª –æ—à–∏–±–∫—É CORS.

### –†–µ—à–µ–Ω–∏–µ: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ URL

–£–æ–±–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª `app/static/js/api.js`:

```javascript
function getApiBaseUrl() {
  // –ù–∞ localhost ‚Üí http://localhost:8000
  if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
    return 'http://localhost:8000';
  }
  
  // –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ —Ç–µ–ª–µ—Ñ–æ–Ω–µ ‚Üí –û–ü–†–ï–î–ï–õ—è–ï–ú –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  const protocol = window.location.protocol;
  const hostname = window.location.hostname;
  const port = window.location.port ? `:${window.location.port}` : '';
  
  return `${protocol}//${hostname}${port}`;
}
```

**–ù–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:**
1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—É—â–∏–π —Ö–æ—Å—Ç (–≤—ã—Ç—è–≥–∏–≤–∞–µ–º `window.location`)
2. –ù–∞ localhost ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º `:8000`
3. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ —Ç–µ–ª–µ—Ñ–æ–Ω–µ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ –∂–µ `hostname:port`

---

## üöÄ –ù–ê—á–∏–Ω–∞–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞

### –®–∞–≥ 1: –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞

–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –Ω–∞ –∫–∞–∫–æ–º —Å–µ—Ä–≤–µ—Ä–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–ø–ø:

#### –õ–æ–∫–∞–ª—å–Ω—ã–π (–õ–û–ö–ê–õ–¨–ù–ê–Ø —Å–µ—Ç—å)
```bash
# –£—Ç–æ–º–ª—è–µ–º –Ω–∞ Linux/Mac:
ipconfig getifaddr en0      # –¥–ª—è Mac
ifconfig | grep inet          # –¥–ª—è Linux
hostname -I                    # –¥–ª—è Linux (WSL)

# –£—Ç–æ–º–ª—è–µ–º –Ω–∞ Windows (PowerShell):
ipconfig  # –ú–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ IPv4 Address

# –ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:
# IPv4 Address. . . . . . . . . : 192.168.1.100
```

#### –£–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
```bash
# –ü–æ–ª—É—á–∞–µ–º IP —Å–µ—Ä–≤–µ—Ä–∞
curl https://ipinfo.io/ip

# –ü–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è–º –≤—ã–¥–µ–ª–µ–Ω–∏—è
echo $HOSTNAME

# –ü—Ä–∏–º–µ—Ä:
# "192.123.456.789"
```

### –®–∞–≥ 2: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Å–ª—É—à–∞–µ—Ç –Ω–∞ `0.0.0.0`

–í `main.py` (Python):
```python
if __name__ == "__main__":
    import uvicorn
    # –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–∞ –í–°–ï–• –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö
    uvicorn.run("main:app", host="0.0.0.0", port=8000)
```

### –®–∞–≥ 3: –ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ, –≤–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å:

```
http://192.168.1.100:8000
```

**–° –º–æ–µ–≥–æ —Å–Ω–∞–º–∫–∞ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- JavaScript –æ–ø—Ä–µ–¥–µ–ª–∏—Ç —ç—Ç–æ `hostname` —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (`192.168.1.100`)
- API –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å —Ç–æ—Ç –∂–µ —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

---

## üîá –û—Ç–ª–∞–¥–∫–∞ CORS –û—à–∏–±–æ–∫

### –û—Ç–∫—Ä–æ–π—Ç–µ Developer Console –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ

**Chrome –¥–ª—è Android:**
1. –ù–∞–∂–º–∏—Ç–µ –§3 –≤ –¥–µ—Å–∫—Ç–æ–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
2. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "Devices"
3. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∏—Å—Ç—ã—Ö –æ—Ç–ª–∞–¥–∫–∏
4. –°–º–æ—Ç—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É **"Console"**

–í—ã –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å:
```
API_BASE_URL: http://192.168.1.100:8000
Current hostname: 192.168.1.100
Current URL: http://192.168.1.100:8000/
```

### –û—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

| –û—à–∏–±–∫–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|---------|---------|----------|
| `CORS error: blocked by browser` | –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ backend –Ω–∞ —Ä–∞–∑–Ω—ã—Ö origins | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `allow_origins` –≤ `main.py` |
| `Failed to fetch` | –û—à–∏–±–∫–∞ —Å–µ—Ç–∏, —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ IP –∏ –ø–æ—Ä—Ç, ping —Å–µ—Ä–≤–µ—Ä |
| `Connection refused` | –£–≤–∞ —Å–µ—Ä–≤–µ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | –ü–µ—Ä–µ–≥—Ä—É–∂–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä |
| `localhost:8000 not found` | –§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –∏—Å–∫–∞–µ—Ç localhost —Ç–µ–ª–µ—Ñ–æ–Ω–∞ | –û—Ç—è–Ω–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —ç—Ç–æ —Ä–µ—à–∏—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º `api.js` |

---

## üóäÔ∏è –ù–ï –†–ê–ë–û–¢–ê–ï–¢? –ß–∏—Ç–∞–π—Ç–µ –ö–û–ù–°–û–õ–¨

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –õ–û–ì–ò

**–í Console —Ç–µ–ª–µ—Ñ–æ–Ω–∞:**
```javascript
// –ü—Ä–æ–≤–µ—Ä—è—é–º, –∫–∞–∫–æ–π —É—Ä–ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
console.log(window.location.href);
console.log(window.location.hostname);
console.log(ApiService);  // –ù–∞—Ä—è–¥–∏ API —Å–µ—Ä–≤–∏—Å–∞
```

**–í Console —Å–µ—Ä–≤–µ—Ä–∞ (DevTools Python):**
```bash
# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ uvicorn
# –¢—Ä–µ–±—É–µ—Ç—Å—è —ç—Ç–æ, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å CORS –æ—à–∏–±–∫–∏
```

### –ö–æ—Ä–æ—Ç–∫–∏–µ —Ç–µ—Å—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ä–≤–µ—Ä:
curl -i http://192.168.1.100:8000/health

# –û–Ω–∞ –¥–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å –û–ö
```

---

## üåü –í—Å–µ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!

–ü–æ—Å–ª–µ —ç—Ç–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ç–µ–ª–µ—Ñ–æ–Ω –¥–æ–ª–∂–µ–Ω –±–µ—Å–ø—Ä–æ–±–ª–µ–º–Ω–æ –∂–∏—Ç—å —Å –∞–ø–ø–∏:

‚úÖ –õ—é–±—ã–µ API-–∑–∞–ø—Ä–æ—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç  
‚úÖ –î–∞–Ω–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è  
‚úÖ CORS –æ—à–∏–±–æ–∫ –Ω–µ—Ç  
‚úÖ –ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –∏ –≤–∫–ª—é—á–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ ‚Äî –≤—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS –∏—Å–Ω—Ä–∞—á–Ω–æ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production)

```python
# –û–¥–Ω–æ–∑–Ω–∞—á–Ω–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å origins
allow_origins = [
    "http://localhost:8000",
    "http://127.0.0.1:8000",
    "http://192.168.1.100:8000",  # –í–∞—à —Å–µ—Ä–≤–µ—Ä –Ω–∞ —Å–µ—Ç—è—Ö (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP)
    "https://yourdomain.com",      # Production domain
]

app.add_middleware(
    CORSMiddleware,
    allow_origins=allow_origins,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

### –û–ø—Ü–∏—é–Ω–∞–ª—å–Ω–æ: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# .env
CORS_ORIGINS=http://localhost:8000,http://192.168.1.100:8000,https://yourdomain.com
```

```python
import os
from dotenv import load_dotenv

load_dotenv()

CORS_ORIGINS = os.getenv("CORS_ORIGINS", "*").split(",")

app.add_middleware(
    CORSMiddleware,
    allow_origins=CORS_ORIGINS,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

---

## üåë –ò—Ç–æ–≥–æ

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ |
|-----------|------------------|
| **Frontend** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ API URL —á–µ—Ä–µ–∑ `window.location` |
| **Backend** | –£–ª—É—á—à–µ–Ω–Ω–∞—è CORS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è + –ø–æ–¥–¥–µ—Ä–∂–∫–∞ credentials |
| **–ú–æ–±–∏–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø** | –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±–æ–≥–æ IP, –±–µ–∑ –∂–µ—Å—Ç–∫–æ–≥–æ localhost |
| **–û—Ç–ª–∞–¥–∫–∞** | –õ–æ–≥–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è API_BASE_URL |

‚ú® **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**